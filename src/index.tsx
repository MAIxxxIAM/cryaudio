import { Context, h, Schema } from 'koishi'

export const name = 'cryaudio'

export interface Config {
  cryPath: string
}

export const inject = {
  required: ["silk","ffmpeg"],
}

export const Config: Schema<Config> = Schema.object({
  cryPath: Schema.string().default('https://gitee.com/maikama/pokemon_cry/raw/master').description('宝可梦叫声链接')
})

const pokemonList = [
  "0",
  "妙蛙种子",
  "妙蛙草",
  "妙蛙花",
  "小火龙",
  "火恐龙",
  "喷火龙",
  "杰尼龟",
  "卡咪龟",
  "水箭龟",
  "绿毛虫",
  "铁甲蛹",
  "巴大蝶",
  "独角虫",
  "铁壳昆",
  "大针蜂",
  "波波",
  "比比鸟",
  "比雕",
  "小拉达",
  "拉达",
  "烈雀",
  "大嘴雀",
  "阿伯蛇",
  "阿伯怪",
  "皮卡丘",
  "雷丘",
  "穿山鼠",
  "穿山王",
  "尼多兰",
  "尼多娜",
  "尼多后",
  "尼多朗",
  "尼多力诺",
  "尼多王",
  "皮皮",
  "皮可西",
  "六尾",
  "九尾",
  "胖丁",
  "胖可丁",
  "超音蝠",
  "大嘴蝠",
  "走路草",
  "臭臭花",
  "霸王花",
  "派拉斯",
  "派拉斯特",
  "毛球",
  "摩鲁蛾",
  "地鼠",
  "三地鼠",
  "喵喵",
  "喵老大",
  "可达鸭",
  "哥达鸭",
  "猴怪",
  "火爆猴",
  "卡蒂狗",
  "风速狗",
  "蚊香蝌蚪",
  "蚊香蛙",
  "蚊香游士",
  "凯西",
  "勇吉拉",
  "胡地",
  "腕力",
  "豪力",
  "怪力",
  "喇叭芽",
  "口呆花",
  "大食花",
  "玛瑙水母",
  "毒刺水母",
  "小拳石",
  "隆隆石",
  "隆隆岩",
  "小火马",
  "烈焰马",
  "呆呆兽",
  "呆壳兽",
  "小磁怪",
  "三合一磁怪",
  "大葱鸭",
  "嘟嘟",
  "嘟嘟利",
  "小海狮",
  "白海狮",
  "臭泥",
  "臭臭泥",
  "大舌贝",
  "刺甲贝",
  "鬼斯",
  "鬼斯通",
  "耿鬼",
  "大岩蛇",
  "催眠貘",
  "引梦貘人",
  "大钳蟹",
  "巨钳蟹",
  "霹雳电球",
  "顽皮雷弹",
  "蛋蛋",
  "椰蛋树",
  "卡拉卡拉",
  "嘎啦嘎啦",
  "飞腿郎",
  "快拳郎",
  "大舌头",
  "瓦斯弹",
  "双弹瓦斯",
  "独角犀牛",
  "钻角犀兽",
  "吉利蛋",
  "蔓藤怪",
  "袋兽",
  "墨海马",
  "刺海龙",
  "角金鱼",
  "金鱼王",
  "海星星",
  "宝石海星",
  "魔墙人偶",
  "飞天螳螂",
  "迷唇姐",
  "电击兽",
  "鸭嘴火兽",
  "凯罗斯",
  "肯泰罗",
  "鲤鱼王",
  "暴鲤龙",
  "拉普拉斯",
  "百变怪",
  "伊布",
  "水伊布",
  "雷伊布",
  "火伊布",
  "多边兽",
  "菊石兽",
  "多刺菊石兽",
  "化石盔",
  "镰刀盔",
  "化石翼龙",
  "卡比兽",
  "急冻鸟",
  "闪电鸟",
  "火焰鸟",
  "迷你龙",
  "哈克龙",
  "快龙",
  "超梦",
  "梦幻",
  "菊草叶",
  "月桂叶",
  "大竺葵",
  "火球鼠",
  "火岩鼠",
  "火暴兽",
  "小锯鳄",
  "蓝鳄",
  "大力鳄",
  "尾立",
  "大尾立",
  "咕咕",
  "猫头夜鹰",
  "芭瓢虫",
  "安瓢虫",
  "圆丝蛛",
  "阿利多斯",
  "叉字蝠",
  "灯笼鱼",
  "电灯怪",
  "皮丘",
  "皮宝宝",
  "宝宝丁",
  "波克比",
  "波克基古",
  "天然雀",
  "天然鸟",
  "咩利羊",
  "茸茸羊",
  "电龙",
  "美丽花",
  "玛力露",
  "玛力露丽",
  "树才怪",
  "蚊香蛙皇",
  "毽子草",
  "毽子花",
  "毽子棉",
  "长尾怪手",
  "向日种子",
  "向日花怪",
  "蜻蜻蜓",
  "乌波",
  "沼王",
  "太阳伊布",
  "月亮伊布",
  "黑暗鸦",
  "呆呆王",
  "梦妖",
  "未知图腾",
  "果然翁",
  "麒麟奇",
  "榛果球",
  "佛烈托斯",
  "土龙弟弟",
  "天蝎",
  "大钢蛇",
  "布鲁",
  "布鲁皇",
  "千针鱼",
  "巨钳螳螂",
  "壶壶",
  "赫拉克罗斯",
  "狃拉",
  "熊宝宝",
  "圈圈熊",
  "熔岩虫",
  "熔岩蜗牛",
  "小山猪",
  "长毛猪",
  "太阳珊瑚",
  "铁炮鱼",
  "章鱼桶",
  "信使鸟",
  "巨翅飞鱼",
  "盔甲鸟",
  "戴鲁比",
  "黑鲁加",
  "刺龙王",
  "小小象",
  "顿甲",
  "多边兽2型",
  "惊角鹿",
  "图图犬",
  "无畏小子",
  "战舞郎",
  "迷唇娃",
  "电击怪",
  "鸭嘴宝宝",
  "大奶罐",
  "幸福蛋",
  "雷公",
  "炎帝",
  "水君",
  "幼基拉斯",
  "沙基拉斯",
  "班基拉斯",
  "洛奇亚",
  "凤王",
  "时拉比",
  "露力丽",
  "小果然",
  "双尾怪手",
  "梦妖魔",
  "乌鸦头头",
  "盆才怪",
  "魔尼尼",
  "小福蛋",
  "小卡比兽",
  "小球飞鱼",
  "玛狃拉",
  "自爆磁怪",
  "大舌舔",
  "超甲狂犀",
  "巨蔓藤",
  "电击魔兽",
  "鸭嘴炎兽",
  "波克基斯",
  "远古巨蜓",
  "叶伊布",
  "冰伊布",
  "天蝎王",
  "象牙猪",
  "多边兽乙型",
  "木守宫",
  "森林蜥蜴",
  "蜥蜴王",
  "火稚鸡",
  "力壮鸡",
  "火焰鸡",
  "水跃鱼",
  "沼跃鱼",
  "巨沼怪",
  "拉鲁拉丝",
  "奇鲁莉安",
  "沙奈朵",
  "艾路雷朵",
  "脱壳忍者",
  "变隐龙",
  "铁哑铃",
  "金属怪",
  "巨金怪",
  "大牙狸",
  "花岩怪",
  "路卡利欧",
  "圆陆鲨",
  "尖牙陆鲨",
  "烈咬陆鲨",
  "大嘴娃",
  "触手百合",
  "摇篮百合",
  "太古羽虫",
  "太古盔甲",
  "头盖龙",
  "战槌龙",
  "盾甲龙",
  "护城龙",
  "请假王",
  "阿勃梭鲁",
  "夜巡灵",
  "彷徨夜灵",
  "黑夜魔灵",
  "吼鲸王",
  "阿尔宙斯",
  "草苗龟",
  "树林龟",
  "土台龟",
  "小火焰猴",
  "猛火猴",
  "烈焰猴",
  "波加曼",
  "波皇子",
  "帝王拿波",
  "朝北鼻",
  "大朝北鼻",
  "独剑鞘",
  "双剑鞘",
  "坚盾剑怪",
  "驹刀小兵",
  "劈斩司令",
  "伦琴猫",
  "波士可多拉",
  "沙漠蜻蜓",
  "美纳斯",
  "暴飞龙",
  "齿轮怪",
  "索罗亚克",
  "仙子伊布",
  "盖欧卡",
  "固拉多",
  "烈空坐",
  "帝牙卢卡",
  "帕路奇亚",
  "骑拉帝纳",
  "雷吉奇卡斯",
  "达克莱伊",
  "盖诺赛克特",
  "莱希拉姆",
  "捷克罗姆",
  "酋雷姆",
  "罗丝雷朵",
  "随风球",
  "长耳兔",
  "斗笠菇",
  "铁面忍者",
  "诅咒娃娃",
  "洛托姆",
  "人造细胞卵",
  "风妖精",
  "流氓鳄",
  "迭失棺",
  "电蜘蛛",
  "坚果哑铃",
  "烛光灵",
  "灯火幽灵",
  "水晶灯火灵",
  "双斧战龙",
  "泥偶巨人",
  "拳海参",
  "钥圈儿",
  "烈箭鹰",
  "谜拟丘",
  "火神蛾",
  "单首龙",
  "双首暴龙",
  "三首恶龙",
  "拉帝亚斯",
  "拉帝欧斯",
  "代欧奇希斯",
  "基拉祈",
  "土居忍士",
  "大尾狸",
  "利欧路",
  "懒人獭",
  "过动猿",
  "吼吼鲸",
  "小猫怪",
  "勒克猫",
  "可可多拉",
  "可多拉",
  "大颚蚁",
  "超音波幼虫",
  "丑丑鱼",
  "宝贝龙",
  "甲壳龙",
  "齿轮儿",
  "齿轮组",
  "索罗亚",
  "含羞苞",
  "毒蔷薇",
  "飘飘球",
  "卷卷耳",
  "蘑蘑菇",
  "怨影娃娃",
  "单卵细胞球",
  "双卵细胞球",
  "木棉球",
  "黑眼鳄",
  "混混鳄",
  "哭哭面具",
  "电电虫",
  "种子铁球",
  "牙牙",
  "斧牙龙",
  "泥偶小人",
  "小箭雀",
  "火箭雀",
  "燃烧虫",
  "泥巴鱼",
];

export function apply(ctx: Context, config: Config) {
  const cryUrl = (id: number) => {
    const name = id.toString().padStart(3, '0')
    return config.cryPath + '/cry/'+name+'Cry.MP3'
  }
  ctx.command('cry [pokemon:string]', 'Get a Pokémon cry', { authority: 0 }).action(async ({ session }, pokemon) => {
    if (!pokemon) {
      session.send('请输入一个宝可梦的名字')
      return
    }
    const index = pokemonList.indexOf(pokemon)
    if (index === -1) {
      session.send('没有该宝可梦的叫声')
      return
    }
   await session.send(<>
    <audio src={cryUrl(index+1)}/>
    </>)
  })
}
